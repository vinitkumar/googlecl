<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>service.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
  <div class='section'>
    <div class='docs'><h1>service.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <p>Copyright (C) 2010 Google Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre><code> http://www.apache.org/licenses/LICENSE-2.0
</code></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Service details and instances for the YouTube service.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;tom.h.miller@gmail.com (Tom Miller)&#39;</span>
<span class="kn">import</span> <span class="nn">gdata.youtube</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">googlecl.base</span>
<span class="kn">import</span> <span class="nn">googlecl.service</span>
<span class="kn">from</span> <span class="nn">googlecl.youtube</span> <span class="kn">import</span> <span class="n">SECTION_HEADER</span>
<span class="kn">from</span> <span class="nn">gdata.youtube.service</span> <span class="kn">import</span> <span class="n">YouTubeService</span>
<span class="kn">from</span> <span class="nn">googlecl</span> <span class="kn">import</span> <span class="n">safe_encode</span>

<span class="n">LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">googlecl</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">LOGGER_NAME</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Extends gdata.youtube.service.YouTubeService for the command line.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">YouTubeServiceCL</span><span class="p">(</span><span class="n">YouTubeService</span><span class="p">,</span> <span class="n">googlecl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">BaseServiceCL</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>This class adds some features focused on using YouTube via an installed app
with a command line interface.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Constructor.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">YouTubeService</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">googlecl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">BaseServiceCL</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">SECTION_HEADER</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>Change the categories of a list of videos to a single category.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">categorize_videos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video_entries</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>If the update fails with a request error, a message is printed to screen.
Usually, valid category strings are the first word of the category as seen
on YouTube (e.g. "Film" for "Film &amp; Animation")</p>
<p>Keyword arguments:
  video_entries: List of YouTubeVideoEntry objects.
  category: String representation of category.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">video_entries</span><span class="p">:</span>
      <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">build_category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UpdateVideoEntry</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
      <span class="k">except</span> <span class="n">gdata</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">RequestError</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;invalid_value&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
          <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;Category update failed, &#39;</span> <span class="o">+</span> <span class="n">category</span> <span class="o">+</span>
                    <span class="s">&#39; is not a category.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="k">raise</span>

  <span class="n">CategorizeVideos</span> <span class="o">=</span> <span class="n">categorize_videos</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Get entries for videos uploaded by a user.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">get_videos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s">&#39;default&#39;</span><span class="p">,</span> <span class="n">titles</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Keyword arguments:
  user: The user whose videos are being retrieved. (Default 'default')
  title: list or string Title(s) that the video(s) should have.
         Default None, for all videos.</p>
<p>Returns:
  List of videos that match parameters, or [] if none do.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;http://gdata.youtube.com/feeds/api/users/&#39;</span> <span class="o">+</span> <span class="n">user</span> <span class="o">+</span> <span class="s">&#39;/uploads&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetEntries</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span>
                           <span class="n">titles</span><span class="p">,</span>
                           <span class="n">converter</span><span class="o">=</span><span class="n">gdata</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">YouTubeVideoFeedFromString</span><span class="p">)</span>

  <span class="n">GetVideos</span> <span class="o">=</span> <span class="n">get_videos</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>Check that the token being used is valid.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">is_token_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_uri</span><span class="o">=</span><span class="s">&#39;/feeds/api/users/default/uploads&#39;</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">googlecl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">BaseServiceCL</span><span class="o">.</span><span class="n">IsTokenValid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_uri</span><span class="p">)</span>

  <span class="n">IsTokenValid</span> <span class="o">=</span> <span class="n">is_token_valid</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Post video(s) to YouTube.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">post_videos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">devtags</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">is_private</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>Keyword arguments:
  paths: List of paths to videos.
  category: YouTube category for the video.
  title: Title of the video. (Default is the filename of the video).
  desc: Video summary (Default None).
  tags: Tags of the video as a string, separated by commas (Default None).
  devtags: Developer tags for the video (Default None).</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="kn">from</span> <span class="nn">gdata.media</span> <span class="kn">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">Title</span><span class="p">,</span> <span class="n">Description</span><span class="p">,</span> <span class="n">Keywords</span><span class="p">,</span> <span class="n">Private</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
      <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">paths</span><span class="p">]</span>
    <span class="n">set_private</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">private</span><span class="p">:</span> <span class="n">Private</span><span class="p">()</span> <span class="k">if</span> <span class="n">private</span> <span class="k">else</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
      <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">my_media_group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">title</span> <span class="ow">or</span> <span class="n">filename</span><span class="p">),</span>
                             <span class="n">description</span><span class="o">=</span><span class="n">Description</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">desc</span> <span class="ow">or</span> <span class="s">&#39;A video&#39;</span><span class="p">),</span>
                             <span class="n">keywords</span><span class="o">=</span><span class="n">Keywords</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">tags</span><span class="p">),</span>
                             <span class="n">category</span><span class="o">=</span><span class="n">build_category</span><span class="p">(</span><span class="n">category</span><span class="p">),</span>
                             <span class="n">private</span><span class="o">=</span><span class="n">set_private</span><span class="p">(</span><span class="n">is_private</span><span class="p">))</span>

      <span class="n">video_entry</span> <span class="o">=</span> <span class="n">gdata</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">YouTubeVideoEntry</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">my_media_group</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">devtags</span><span class="p">:</span>
        <span class="n">taglist</span> <span class="o">=</span> <span class="n">devtags</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">taglist</span> <span class="o">=</span> <span class="n">taglist</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">video_entry</span><span class="o">.</span><span class="n">AddDeveloperTags</span><span class="p">(</span><span class="n">taglist</span><span class="p">)</span>
      <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">safe_encode</span><span class="p">(</span><span class="s">&#39;Loading &#39;</span> <span class="o">+</span> <span class="n">path</span><span class="p">))</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InsertVideoEntry</span><span class="p">(</span><span class="n">video_entry</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
      <span class="k">except</span> <span class="n">gdata</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">RequestError</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;Failed to upload video: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
      <span class="k">except</span> <span class="n">gdata</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">YouTubeError</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err_str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;path name or a file-like object&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
          <span class="n">err_str</span> <span class="o">=</span> <span class="n">safe_encode</span><span class="p">(</span><span class="s">&#39;Could not find file &#39;</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;invalid_value&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span>
            <span class="n">err</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;media:category&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
          <span class="n">err_str</span> <span class="o">=</span> <span class="s">&#39;Invalid category: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">category</span>
          <span class="n">err_str</span> <span class="o">+=</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">For a list of valid categories, see &#39;</span>
                      <span class="s">&#39;http://code.google.com/p/googlecl/wiki/Manual#YouTube&#39;</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;Video uploaded: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">entry</span><span class="o">.</span><span class="n">GetHtmlLink</span><span class="p">()</span><span class="o">.</span><span class="n">href</span><span class="p">)</span>

  <span class="n">PostVideos</span> <span class="o">=</span> <span class="n">post_videos</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Add or remove tags on a list of videos.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">def</span> <span class="nf">tag_videos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video_entries</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Keyword arguments:
  video_entries: List of YouTubeVideoEntry objects.
  tags: String representation of tags in a comma separated list. For how
        tags are generated from the string, see
        googlecl.base.generate_tag_sets().</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="kn">from</span> <span class="nn">gdata.media</span> <span class="kn">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">Keywords</span>
    <span class="n">remove_set</span><span class="p">,</span> <span class="n">add_set</span><span class="p">,</span> <span class="n">replace_tags</span> <span class="o">=</span> <span class="n">googlecl</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">generate_tag_sets</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">video_entries</span><span class="p">:</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="p">:</span>
        <span class="n">video</span><span class="o">.</span><span class="n">media</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
        <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span> <span class="o">=</span> <span class="n">Keywords</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>No point removing tags if the video has no keywords,
or we're replacing the keywords.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>      <span class="k">if</span> <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span> <span class="ow">and</span> <span class="n">remove_set</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">replace_tags</span><span class="p">:</span>
        <span class="n">current_tags</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">current_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">current_tags</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">))</span>
        <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_set</span> <span class="o">-</span> <span class="n">remove_set</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">replace_tags</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
        <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">add_set</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">add_set</span><span class="p">:</span>
        <span class="n">video</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="s">&#39;,&#39;</span> <span class="o">+</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">add_set</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">UpdateVideoEntry</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>

  <span class="n">TagVideos</span> <span class="o">=</span> <span class="n">tag_videos</span>


<span class="n">SERVICE_CLASS</span> <span class="o">=</span> <span class="n">YouTubeServiceCL</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>Build a single-item list of a YouTube category.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">build_category</span><span class="p">(</span><span class="n">category</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>This refers to the Category of a video entry, such as "Film" or "Comedy",
not the atom/gdata element. This does not check if the category provided
is valid.</p>
<p>Keyword arguments:
  category: String representing the category.</p>
<p>Returns:
  A single-item list of a YouTube category (type gdata.media.Category).</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="kn">from</span> <span class="nn">gdata.media</span> <span class="kn">import</span> <span class="n">Category</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">Category</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
                <span class="n">scheme</span><span class="o">=</span><span class="s">&#39;http://gdata.youtube.com/schemas/2007/categories.cat&#39;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">category</span><span class="p">)]</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
